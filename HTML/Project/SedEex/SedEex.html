<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SedEx</title>
  <link rel="stylesheet" href="../../../css/Project/SedEx.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="project-title">세덱스(SedEex)팀 프로젝트</h1>
      <img src="../../../image/projects/SedEx/backgroundSedEx.png"/>
    </div>

    <div class="Introduction">
      <h3>요약</h3>
      <ul>
        <li>세덱스(SedEx)라는 스포츠 용품 쇼핑몰에서 장바구니 백엔드 개발을 담당하게 되었습니다.</li>
      </ul>
      
      <h3>역할</h3>
      <ul>
        <li>프로젝트 팀 인원5명</li>
        <li>역할: 팀장</li>
        <li>담당: 장바구니</li>
      </ul>
      
      <h3>시기</h3>
      <ul>
        <li>프로젝트 진행 기간 ( 2024.05.17 ~ 2024.05.28 )</li>
      </ul> 

      <h3>도구 및 기술</h3>
      <ul>
        <li><strong>DBMS:</strong> Oracle11g xe</li>
        <li><strong>개발언어:</strong> AVA(JDK17)</li>
        <li><strong>개발도구:</strong> Oracle SQL Developer</li>
      </ul>
    </div>

    <hr>

    <div class="Document">
      <h1>📄문서작업</h1>
      <h3>요구사항 정의서</h3>
      <img src="../../../image/projects/SedEx/세덱스 요구사항 정의서.png" style="display: block; margin-bottom: 20px;" class="zoomable"/>

      <h3>테이블 정의서</h3>
      <img src="../../../image/projects/SedEx/세덱스 테이블정의서.png" class="zoomable"/>

      <h3>Flow Diagram</h3>
      <img src="../../../image/projects/SedEx/세덱스 다이어그램.jpg" class="zoomable"/>
    </div>

    <hr>

    <div class="project">
      <h1>💻프로젝트 화면</h1>
      
      <h3>0.장바구니 메뉴</h3>
      <img src="../../../image/projects/interYard/인터야드 중고장터 리스트.png" class="zoomable"/>
      <ul>
        <li><b>장바구니의 기능구현으로 장바구니의 메뉴를 선택해서 들어갑니다.</b></li>
      </ul>
      <details>
        <summary><b>메뉴출력</b></summary>
        <li><b>System.out.print("| 1.리스트 | 2.수정 | 3.삭제 | 4.담기 | 0.이전메뉴 |");</b></li>
          <ol start="1">
            <li>리스트: 사용자가 장바구니에 추가한 상품을 볼수있습니다.</li>
            <li>수정: 장바구니에 있는 상품의 수량을 수정할 수 있습니다.</li>
            <li>삭제: 장바구니에 있는 상품을 삭제 할 수 있습니다.</li>
            <li>담기: 장바구니에서 상품을 담을 수 있습니다.</li>
          </ol>
      </details>

      <hr>

      <h3>1.장바구니 리스트</h3>
      <img src="../../../image/projects/interYard/세덱스 장바구니 리스트.png" class="zoomable"/>
      <ul>
        <li><b>장바구니의 리스트로 ( 장바구니 번호, 회원번호, 상품코드, 상품명, 상품수량, 상품가격, 합계 )를 보여주며 장바구나의 총금액 과 구매 여부를 묻도록 개발했습니다.</b></li>
      </ul>

      <hr>

      <h3>2.장바구니 수정</h3>
      <img src="../../../image/projects/SedEx/세덱스 장바구니 수정2.png" style="display: block; margin-bottom: 20px;" class="zoomable"/>
      <img src="../../../image/projects/SedEx/세덱스 장바구니 수정.png" style="display: block;" class="zoomable"/>
      <ul>
        <li><b>장바구니 수정에서는 장바구니 번호를 입력하고 수량을 수정 할 수 있습니다 그리고 수정 후 수정완료 나 수정취소를 입력하면 장바구니 메뉴로 돌아가지만 수정완료는 수량이 수정이되면 장바구니 메뉴로 돌아갑니다.</b></li>
      </ul>

      <hr>

      <h3>3.장바구니 삭제</h3>
      <img src="../../../image/projects/SedEx/세덱스 장바구니 삭제 1.png" style="display: block; margin-bottom: 20px;" class="zoomable"/>
      <img src="../../../image/projects/SedEx/세덱스 장바구니 삭제 2.png" style="display: block; margin-bottom: 20px;" class="zoomable"/>
      <img src="../../../image/projects/SedEx/세덱스 장바구니 삭제 3.png" style="display: block;" class="zoomable"/>
      <ul>
        <li><b>장바구니 삭제에서는 “선택삭제” 와 “전체삭제”를 할수있도록 만들었습니다.</b></li>
      </ul>
        <b>선택삭제:</b> 장바구니 번호를 입력하면 해당번호 만 삭제 할 수 있습니다.
        <b>전체삭제:</b> 장바구니 번호를 입력하지 않고 장바구니에 있는 모든 상품을 삭제 할 수 있습니다.

      <hr>

      <h3>4.장바구니 담기</h3>
      <img src="../../../image/projects/SedEx/세덱스 장바구니 담기.png"/>
      <ul>
        <li><b>장바구니에서 상품을 추가 할 수 있도록 상품 리스트를 불러와 상품코드와 상품수량을 입력 하면 장바구니에 상품을 등록 할 수 있도록 개발 했습니다.</b></li>
      </ul>
    </div>

    <hr>

    <div class="core-code">
      <h1>🔑핵심코드</h1>
      <h2>1. 장바구니 리스트</h2>
      
      <h3>CartList Controller</h3>
      <img src="../../../image/projects/SedEx/세덱스CartList Controller.png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 장바구니 리스트를 출력하고, 구매 여부를 확인하는 기능을 담당합니다.</b></li>
      </ul>
      <details>
        <summary><b>장바구니 리스트 출력</b></summary>
        <ul>
          <li><b>CartListService</b>를 실행하여 현재 록인한 회원의 장바구니 리스트를 가져옵니다.</li>
          <li><b>결과 리스트</b>를 cartList 변수에 저장합니다.</li>
          <li><b>CartPritn</b>클래스를 사용하여 장바구니 리스트를 출력합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>장바구니 상태 확인</b></summary>
        <ul>
          <li><b>장바구니가 비어 있을 경우, “장바구니가 비어 있습니다”</b>라는 메시지를 출력합니다.</li>
          <li><b>장바구니에 상품이 있을 경우</b> 구매 여부를 묻습니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>구매 여부 확인</b></summary>
        <ul>
          <li>사용자가 <b>y</b>를 선택하면
            <ul>
              <li>현재 로그인한 회원의 번호를 가져옵니다.</li>
              <li><b>연락처, 배송지, 요청사항</b>을 입력받습니다.</li>
              <li><b>입력받은 연락처, 배송지, 요청사항</b>을 배열에 저장한 후 주문을 처리합니다.</li>
            </ul>
          </li>

          <li>사용자가 <b>n</b>를 선택하면
            <ul>
              <li><b>구매가 취소</b>되었다는 메시지를 출력합니다.</li>
            </ul>
          </li>
          
          <li>잘못된 입력이 들어온 경우
            <ul>
              <li><b>잘못된 입력입니다</b>라는 메시지를 출력하여 올바른 입력을 유도합니다.</li>
            </ul>
          </li>          
        </ul>
      </details> 

      <h3>Cart Print</h3>
      <img src="../../../image/projects/SedEx/세덱스 Cart Print.png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 리스트의 항목을 출력하고  각 상품의 합계 금액을 계산하여 총액을 출력합니다.</b></li>
      </ul>
      <details>
        <summary><b>장바구니 리스트 헤더 출력</b></summary>
        <ul>
          <li>장바구니 리스트 출력 시 헤더에는<b>장바구니 번호, 회원번호, 상품코드, 상품명, 상품수량, 상품가격, 합계</b> 포함하여 출력합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>장바구니 리스트 존재하는 경우</b></summary>
        <ul>
          <li>리스트의 각 항목을 반복하며 장바구니 항목을 출력합니다.
            <ul>
              <li><b>vo.getCartCode()</b>를 이용해 <b>장바구니 번호</b>를 출력합니다.</li>
              <li><b>vo.getMemberNo()</b>를 이용해 <b>회원번호를</b>를 출력합니다.</li>
              <li><b>vo.getNo()</b>를 이용해 <b>상품번호</b>를 출력합니다.</li>
              <li><b>vo.getTitle()</b>를 이용해 <b>상품명</b>를 출력합니다.</li>
              <li>vo.getQuantity()</b>를 이용해 <b>상품 수량</b>를 출력합니다.</li>
              <li><b>vo.getPrice()</b>를 이용해 <b>상품 가격</b>를 출력합니다.</li>
              <li><b>vo.getSum()</b>를 이용해 <b>합계 금액</b>를 출력합니다.</li>
            </ul>
          </li>
        </ul>
      </details>

      <details>
        <summary><b>총금액 계산</b></summary>
        <ul>
          <li>각 장바구니 항목의 합계 금액<b>(vo.getSum)</b>을 더해서 총금액을 계산합니다.</li>
        </ul>
      </details>

      <h3>Cart Print</h3>
      <img src="../../../image/projects/SedEx/세덱스 Cart DAO.png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 사용자의 장바구니에 담긴 상품 데이터를 데이터베이스에서 조회하여 리스트로 반환합니다.</b></li>
      </ul>

      <details>
        <summary><b>리스트 초기화</b></summary>
        <ul>
          <li>List<CartVO> list = new ArrayList<CartVO>()를 통해 장바구니(CartVO)의 리스트를 만듭니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>SQL 문 준비</b></summary>
        <ul>
          <li><b>pstmt = con.prepareStatement(LIST)</b>로 장바구니 리스트를 가져오는 SQL쿼리(LIST)를 실행할 준비를 합니다.</li>
          <li><b>pstmt.setLong(1, Main.login.getMemberNo());</b>를 통해 로그인한 사용자의 회원번호를 SQL쿼리에 넣습니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>결과처리</b></summary>
        <ul>
          <li>rs가 null이 아닌 경우
            <ul>
              <li>결과를 반복문을 통해 CartVO 객체를 생성하고 각 칼럼 값을 CartVO객체에 저장합니다.</li>
              <li><b>장바구니번호, 상품번호, 상품수량, 회원번호, 상품가격, 합계</b> 메서드를 통해 각 항목의 값을 넣습니다.</li>
              <li>vo.getPrice()와 vo.getQuantity()를 곱하여 <b>합계 금액</b>을 계산하고 setsum으로 저장합니다..</li>
              <li>각 CartVO 객체는 <b>리스트에 추가</b>합니다.</li>
            </ul>
          </li>
        </ul>
      </details>

      <details>
        <summary><b>결과 반환</b></summary>
        <ul>
          <li>rs가 null이 아닌 경우
            <ul>
              <li><b>최종적으로 리스트를 반환</b>하여 로그인한 사용자의 장바구니에 담긴 상품 정보를 전달합니다.</li>
            </ul>
          </li>
        </ul>
      </details> 

      <h3>Cart SQL 쿼리</h3>
      <img src="../../../image/projects/SedEx/세덱스 Cart SQL 쿼리.png" class="zoomable"/>
      <ul>
        <li><b>이 SQL쿼리는 현재 로그인 된 사용자의 장바구니 목록을 조회하며 장바구니 항목을 최신순으로 내림차 순으로 정렬하는 쿼리입니다.</b></li>
      </ul>

      <details>
        <summary><b>장바구니 항목 조회</b></summary>
        <ul>
          <li><b>cart 테이블(c)</b> 과 <b>goods 테이블(g)</b>을 조인하여 로그인 사용자가 담은 장바구니 항목을 조회합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>선택하는 컬럼들</b></summary>
        <ul>
          <li><b>c.cartCode:</b> 장바구니 코드</li>
          <li><b>c.quantity:</b> 상품 수량</li>
          <li><b>c.memberNo:</b> 회원 번호</li>
          <li><b>g.title:</b> 상품명 </li>
          <li><b>g.price :</b> 상품 가격 </li>
          <li><b>c.sum:</b> 합계 금액 </li>
        </ul>
      </details>

      <details>
        <summary><b>테이블 조인</b></summary>
        <ul>
          <li><b>from cart c, goods g :</b> 장바구니 테이블(cart) 과 상품 테이블(goods)을 사용합니다.</li>
          <li>where (memberNo = ?) and (c.no = g.no)
            <ul>
              <li>로그인한 사용자의 회원번호를 입력하여 해당 사용자의 장바구니 항목만 조회합니다.</li>
            </ul>
          </li>
        </ul>
      </details>

      <details>
        <summary><b>정렬</b></summary>
        <ul>
          <li><b>order by c.cartCode desc:</b> 장바구니 항목을 장바구니 코드(cartCode) 기준으로 내림차순 정렬하여 가장 최근에 담은 상품부터 순서대로 가져옵니다.</li>
        </ul>
      </details>

      <hr>

      <h2>2.장바구니 수정</h2>

      <h3>Cart Update Controller</h3>
      <img src="../../../image/projects/SedEx/세덱스 Cart Update Controller.png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 장바구니 항목 수정으로 사용자는 장바구니에 담긴 항목의 수량을 수정, 수정 완료, 취소 할수있습니다.</b></li>
      </ul>
      <details>
        <summary><b>수정 항목 선택</b></summary>
        <pre>
          <code>
            whileLoop:
            while(true) {
                System.out.println("1.수량, 2.수정완료 0.수정최소");
                String item = In.getStr("수정 항목 선택");
          </code>
        </pre>
        <ul>
          <li>사용자는 선택지에서 수정할 항목을 선택할 수 있으며 사용자가 입력한 값에 따라 다른 동작을 수행합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>수량 수정 (case1)</b></summary>
        <pre>
          <code>
            case "1": {
                long cnt = In.getLong("수량");
                vo.setQuantity(cnt);
                break;
            }
          </code>
        </pre>
        <ul>
          <li>사용자가 선택지 1번을 선택하면 수량을 수정하고 vo에 저장합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>수정 완료 (case2)</b></summary>
        <pre>
          <code>
            case "2": {
                vo.setCartCode(no);
                Execute.execute(new CartUpdateService(), vo);
                System.out.println("수정이 완료되었습니다.");
                break whileLoop;
            }
          </code>
        </pre>
        <ul>
        <li>사용자가 선택지 2번을 선택하면 1번에서 수정한 수량이 CartUpdateService를 호출하여 해당 항목을 업데이트 후 <b>수정이 완료되었습니다</b> 메시지를 출력과 함께 메인메뉴로 이동합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>잘못된 입력 처리 (default)</b></summary>
        <pre>
          <code>
            default: {
                System.out.println("잘못된 항목 번호 선택하셨습니다.");
                System.out.println("[1, 2, 0] 번호를 선택하세요.");
            }
          </code>
        </pre>
        <ul>
          <li>사용자가 입력을 잘못했으면 <b>잘못된 항목 번호를 선택하셨습니다</b>메시지와 <b>[1, 2, 0] 번호를 선택하세요</b> 라는 메시지가 출력 됩니다.</li>
        </ul>
      </details> 

      <h3>Cart Upate DAO</h3>
      <img src="../../../image/projects/SedEx/세덱스 Cart Upate DAO.png" class="zoomable"/>
      <ul>
        <li><b>이 메서드는 장바구니 항목의 수량을 업데이트 하는 역할로 수정된 수량을 데이터베이스에 반영합니다.</b></li>
      </ul>
      <details>
        <summary><b>장바구니 항목의 수량을 업데이트하는 SQL쿼리 실행</b></summary>
        <pre>
          <code>
            pstmt = con.prepareStatement(UPDATE);
            pstmt.setLong(1, vo.getQuantity());
            pstmt.setLong(2, vo.getCartCode());
          </code>
        </pre>
        <ul>
        <li><b>pstmt.setLong(1, vo.getQuantity()):</b> 수정할 상품의 수량을 SQL에 값을 넣습니다.</li>
        <li><b>pstmt.setLong(2, vo.getCartCode()):</b> 장바구니 번호를  SQL에 값을 넣어 수정할 항목을 식별합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>수량이 0개 이하일 경우</b></summary>
        <pre>
          <code>
            if (vo.getQuantity() <= 0) {
                throw new Exception("1개 이상부터 구매하실 수 있습니다.");
            }
          </code>
        </pre>
        <ul>
          <li><b>수량 0개 이하로 설정된 경우 업데이트를 중단하고 <b>1개 이상부터 구매하실 수 있습니다</b> 메시지를 보여줍니다</li>
        </ul>
      </details> 

      <h3>Cart Upate SQL쿼리</h3>
      <img src="../../../image/projects/SedEx/세덱스 세덱스 Cart Upate SQL쿼리.png" class="zoomable"/>
      <ul>
        <li><b>이 쿼리는 특정 장바구니 항목의 수량을 수정할 때 사용되면 수량이 수정되면 데이터베이스에 저장됩니다.</b></li>
      </ul>
            
      <details>
        <summary><b>수정할 값 설정</b></summary>
        <ul>
          <li><b>UPDATE cart SET quantity = ? :</b> 새로운 상품 수량을 설정하는 부분으로 ?는 사용자가 입력한 새로운 수량으로 채워집니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>수정할 항목 지정</b></summary>
        <ul>
          <li><b>WHERE cartCode = ? : CartCode</b>로 장바구니 번호를 식별하고 어떤 장바구니 항목을 수정할지 결정하는 조건입니다.</li>
        </ul>
      </details>

      <hr>

      <h2>3.장바구니 삭제</h2>
      <h3>Cart Delete Controller</h3>
      <img src="../../../image/projects/SedEx/세덱스 Cart Delete Controller.png" class="zoomable"/>
      <ul>
        <li><b>이 코드는 장바구니 삭제 기능을 다루며 사용자 입력에 따라 항목을 선택적으로 삭제 하거나 전체 삭제를 할 수 있습니다.</b></li>
      </ul>
            
      <details>
        <summary><b>삭제 메뉴</b></summary>
        <pre>
          <code>
            System.out.println("=======================");
            System.out.println("1. 선택 삭제");
            System.out.println("2. 전체 삭제");
            System.out.println("0. 삭제 취소");
            System.out.println("=======================");
            long deleteOption = In.getLong("번호를 입력해주세요.");
          </code>
        </pre>        
        <ul>
          <li>사용자는 <b>1번(선택 삭제)</b>, <b>2번(전체 삭제)</b>, <b>0번(삭제 취소)</b> 중에서 삭제 방법을 선택 할 수 있습니다.</li>
          <li>사용자가 삭제 할 방법을 선택하여 삭제 합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>선택 삭제 ( 1번 )</b></summary>      
        <ul>
          <li>사용자가 <b>1번(선택 삭제)</b>를 선택한 경우 <b>CartDeleteService</b> 호출하여 삭제할 장바구니 번호를 입력하면 <b>vo.getCartCode()</b>에 저장된 장바구니 번호가 삭제 됩니다.</li>
        </ul>
      </details>

      <details>
        <summary><b></b>전체 삭제 (2번)</b></summary>
        <pre>
          <code>
            else if (deleteOption == 2) {
                vo.setCartCode(-1L);
                result = Execute.execute(new CartDeleteService(), vo.getCartCode());
            }
          </code>
        </pre>
        <ul>
          <li>사용자가 <b>2번(전체 삭제)</b>를 선택한 경우 <b>vo.setCartCode(-1L)</b>로 모든 장바구니를 삭제 진행합니다. </li>
        </ul>
      </details>

      <details>
        <summary><b>삭제 취소 (0번)</b></summary>
        <pre>
          <code>
            else if (deleteOption == 0) {
                System.out.println("삭제가 취소되었습니다.");
            }
          </code>
        </pre>
        <ul>
          <li><b>사용자가 0번(삭제 취소)</b>를 선택하면 삭제 작업을 중단하고 <b>삭제가 취소되었습니다</b>라는메시지를 출력합니다.</li>
        </ul>
      </details>            
    </div>
  </div>
  
  
  
  
  
  
  
  <!-- 모달(확대된 이미지) -->
  <div class="modal" id="imageModal">
    <img id="modalImg">
  </div>
  <script src="../../../JavaScript/SedEx/SedEx.js"></script>
</body>
</html>
